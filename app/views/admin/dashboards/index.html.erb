<%= render "layouts/adnav" %>
<div class="main mt-4">
  <div class="row">
    <div class="col">
      <h1><b>User List</b></h1>
    </div>
    <div class="col">
      <%= form_tag({ url: admin_dashboards_path }, { method: :get }) do %>
        <div class="d-flex justify-content-end">
          <%= text_field_tag :user %>
          <%= submit_tag :search, class: "btn btn-warning" %>
        </div>
      <% end %>
    </div>
  </div>
  <table class="table table-bordered table-dark table-hover text-center" style="font-size: 15px">
    <thead>
    <tr>
      <th scope="col">Email</th>
      <th scope="col">Parent Email</th>
      <th scope="col">Children Members</th>
      <th scope="col">Phone Number</th>
      <th scope="col">Coins</th>
      <th scope="col">Total Used Coins</th>
      <th scope="col">Total Deposit</th>
      <th scope="col">Member Total Deposits</th>
    </tr>
    </thead>
    <tbody>
    <% if @users.blank? %>
      <tr class="table-success ">
        <td colspan="8"><p> No record found.</p></td>
      </tr>
    <% else %>
      <% @users.each do |user| %>
        <tr class="table-success ">
          <td><%= user.email %></td>
          <td><%= user.parent&.email %></td>
          <td><%= user.children_members %></td>
          <td><%= user.phone %></td>
          <td><%= user.coins %></td>
          <td><%= user.total_used_coins %></td>
          <td><%= user.total_deposit %></td>
          <td><%= user.member_total_deposits %></td>
        </tr>
      <% end %>
    <% end %>
    </tbody>
  </table>
</div>
